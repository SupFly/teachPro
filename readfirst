mybatis SQL语句映射文件(2)增删改查、参数、缓存 http://blog.csdn.net/luqin1988/article/details/7831925

<!-- 插入学生 自动主键-->
<insert id="insertStudentAutoKey" parameterType="StudentEntity">
	<selectKey keyProperty="studentID" resultType="String" order="BEFORE">
			select nextval('student')
	</selectKey>
		INSERT INTO STUDENT_TBL (STUDENT_ID,
                         		 STUDENT_NAME,
                         		 STUDENT_SEX,
                         		 STUDENT_BIRTHDAY,
                         		 CLASS_ID)
			  VALUES   (#{studentID},
			            #{studentName},
			            #{studentSex},
			            #{studentBirthday},
			            #{classEntity.classID})    
</insert>
//
BEGIN
    UPDATE T_SYS_SEQUENCE
    SET current_value=LAST_INSERT_ID(current_value+increment)
    WHERE  LOWER(name)=LOWER(seq_name);
    RETURN LAST_INSERT_ID();
END


<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.teachpro.mapper.UserMapper">
	<resultMap type="User" id="userResult">
		<result column="user_email" property="user_email" />
		<result column="user_name" property="user_name" />
		<result column="user_password" property="user_password" />
	</resultMap>
	<select id="login" resultMap="userResult">
		select * from
		wjc_user
		where
		user_email=#{user_email}
		and user_password=#{user_password}
	</select>

	<select id="getAllUsers" resultMap="userResult">
		select *
		from wjc_user
	</select>
</mapper>
<!-- error ,,,,resultMap wrong to resultType... -->
